{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"/Users/rwankhalifa/Documents/HierarchicalTodoList/client/src/components/MoveTaskModal.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef, useCallback } from \"react\";\nimport { X, AlertCircle, ArrowRight, MoveVertical, ListTree } from \"lucide-react\";\nimport api from \"../services/api\";\nimport { toast } from \"react-toastify\";\nimport \"./Modal.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MoveTaskModal = ({\n  isOpen,\n  onClose,\n  lists,\n  currentListId,\n  taskTitle,\n  task,\n  fetchTasks\n}) => {\n  _s();\n  const [selectedListId, setSelectedListId] = useState(\"\");\n  const [selectedParentId, setSelectedParentId] = useState(\"\");\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [moveType, setMoveType] = useState(\"list\"); // \"list\" or \"parent\"\n  const [filteredLists, setFilteredLists] = useState([]);\n  const [potentialParents, setPotentialParents] = useState([]);\n  const [taskDepth, setTaskDepth] = useState(0);\n  const modalContentRef = useRef(null);\n  const requestInProgress = useRef(false);\n\n  // Calculate the depth of the current task\n  const calculateTaskDepth = useCallback(async () => {\n    if (!task || !task.id) return;\n    try {\n      // Get all tasks for the current list\n      const response = await api.get(`/api/todos/tasks/${currentListId}`);\n      const allTasks = response.data;\n\n      // Helper function to find a task's depth\n      const findTaskDepth = (tasks, taskId, currentDepth = 0) => {\n        for (const t of tasks) {\n          if (t.id === taskId) {\n            return currentDepth;\n          }\n          if (t.subtasks && t.subtasks.length > 0) {\n            const foundDepth = findTaskDepth(t.subtasks, taskId, currentDepth + 1);\n            if (foundDepth !== -1) {\n              return foundDepth;\n            }\n          }\n        }\n        return -1;\n      };\n      const depth = findTaskDepth(allTasks, task.id);\n      setTaskDepth(depth !== -1 ? depth : 0);\n    } catch (error) {\n      console.error(\"Failed to calculate task depth:\", error);\n      setTaskDepth(0);\n    }\n  }, [currentListId, task]);\n  useEffect(() => {\n    if (isOpen && lists) {\n      // Filter out the current list for list movement\n      const filtered = lists.filter(list => list.id !== currentListId);\n      setFilteredLists(filtered);\n\n      // Reset selected values when modal opens\n      setSelectedListId(\"\");\n      setSelectedParentId(\"\");\n      setMoveType(\"list\");\n      setPotentialParents([]);\n      setIsLoading(false);\n      setIsSubmitting(false);\n      requestInProgress.current = false;\n\n      // Calculate the current task's depth\n      calculateTaskDepth();\n    }\n  }, [isOpen, lists, currentListId, task, calculateTaskDepth]); // Added calculateTaskDepth to dependency array\n\n  // Fetch potential parent tasks when moveType changes to \"parent\"\n  const fetchPotentialParents = useCallback(async () => {\n    // Prevent multiple simultaneous requests\n    if (requestInProgress.current) return;\n    requestInProgress.current = true;\n    setIsLoading(true);\n    try {\n      // Fetch tasks from the selected list or current list if none selected\n      const listId = selectedListId || currentListId;\n      const response = await api.get(`/api/todos/tasks/${listId}`);\n\n      // Helper function to get the depth of a task in the hierarchy\n      const getTaskDepth = (taskObj, allTasks, currentDepth = 0) => {\n        // Base case: if we're at the top level, return current depth\n        if (!taskObj.parent_id) return currentDepth;\n\n        // Find the parent task\n        const findParent = (tasks, parentId) => {\n          for (const t of tasks) {\n            if (t.id === parentId) return t;\n            if (t.subtasks && t.subtasks.length > 0) {\n              const found = findParent(t.subtasks, parentId);\n              if (found) return found;\n            }\n          }\n          return null;\n        };\n        const parent = findParent(allTasks, taskObj.parent_id);\n        if (!parent) return currentDepth; // Parent not found\n\n        // Recursively get depth of parent\n        return getTaskDepth(parent, allTasks, currentDepth + 1);\n      };\n\n      // Filter out the current task and its subtasks (can't move a task to be its own child)\n      const filterTaskAndDescendants = (tasks, taskId) => {\n        return tasks.filter(t => {\n          if (t.id === taskId) return false;\n\n          // Also filter out any descendants\n          if (t.subtasks && t.subtasks.length > 0) {\n            t.subtasks = filterTaskAndDescendants(t.subtasks, taskId);\n          }\n          return true;\n        });\n      };\n      const filteredTasks = filterTaskAndDescendants(response.data, task.id);\n\n      // Flatten the task hierarchy for the dropdown\n      const flattenTasks = (tasks, depth = 0, result = []) => {\n        tasks.forEach(t => {\n          // Check if adding this task as a parent would exceed max depth\n          const maxDepth = 2; // 0-based, so this is 3 levels\n          const currentTaskDepth = getTaskDepth(task, response.data);\n\n          // Only add as potential parent if it wouldn't exceed max depth\n          if (depth + currentTaskDepth <= maxDepth) {\n            result.push({\n              id: t.id,\n              title: t.title,\n              depth\n            });\n          }\n          if (t.subtasks && t.subtasks.length > 0) {\n            flattenTasks(t.subtasks, depth + 1, result);\n          }\n        });\n        return result;\n      };\n      const flatTasks = flattenTasks(filteredTasks);\n      setPotentialParents(flatTasks);\n    } catch (error) {\n      console.error(\"Failed to fetch potential parent tasks:\", error);\n      toast.error(\"Failed to load tasks. Please try again.\");\n    } finally {\n      setIsLoading(false);\n      requestInProgress.current = false;\n    }\n  }, [selectedListId, currentListId, task]);\n\n  // Update the useEffect to include fetchPotentialParents in the dependency array\n  useEffect(() => {\n    if (moveType === \"parent\" && isOpen && !isSubmitting) {\n      fetchPotentialParents();\n    }\n  }, [moveType, isOpen, selectedListId, fetchPotentialParents, isSubmitting]);\n  if (!isOpen) return null;\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (moveType === \"list\" && !selectedListId) return;\n    if (moveType === \"parent\" && !selectedParentId && selectedParentId !== \"root\") return;\n    if (isSubmitting || isLoading) return;\n    setIsSubmitting(true);\n    try {\n      if (moveType === \"list\") {\n        // Move to another list\n        await api.patch(`/api/todos/task/${task.id}/move`, {\n          list_id: selectedListId,\n          parent_id: null // Make it a top-level task\n        });\n        const targetList = filteredLists.find(l => l.id === selectedListId);\n        toast.success(`Task moved to \"${(targetList === null || targetList === void 0 ? void 0 : targetList.title) || \"another list\"}\"`);\n      } else {\n        var _filteredLists$find, _lists$find, _potentialParents$fin;\n        // Move to be a child of another task or to be a top-level task\n        const targetListId = selectedListId || currentListId;\n\n        // If \"root\" is selected, send null as parent_id to make it a top-level task\n        // Otherwise, send the selected parent ID\n        const parentId = selectedParentId === \"root\" ? null : selectedParentId;\n        const targetListName = selectedListId ? (_filteredLists$find = filteredLists.find(l => l.id === selectedListId)) === null || _filteredLists$find === void 0 ? void 0 : _filteredLists$find.title : (_lists$find = lists.find(l => l.id === currentListId)) === null || _lists$find === void 0 ? void 0 : _lists$find.title;\n        const parentName = selectedParentId === \"root\" ? \"top level\" : (_potentialParents$fin = potentialParents.find(p => p.id === selectedParentId)) === null || _potentialParents$fin === void 0 ? void 0 : _potentialParents$fin.title;\n        await api.patch(`/api/todos/task/${task.id}/move`, {\n          list_id: targetListId,\n          parent_id: parentId\n        });\n        toast.success(`Task moved to ${parentName ? `\"${parentName}\"` : \"top level\"} in ${targetListName}`);\n      }\n\n      // Wait a moment before fetching to ensure the server has processed the change\n      setTimeout(() => {\n        fetchTasks();\n        onClose();\n      }, 300);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Failed to move task:\", error);\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || \"Failed to move task. Please try again.\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal move-task-modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Move Task\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"close-button\",\n          \"aria-label\": \"Close\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          ref: modalContentRef,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"task-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Moving task: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: taskTitle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 30\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"task-depth-info\",\n              children: [\"Current level: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: taskDepth + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 32\n              }, this), \" (of 3 maximum levels)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Move Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"radio-group move-type-options\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"radio-label\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"moveType\",\n                  value: \"list\",\n                  checked: moveType === \"list\",\n                  onChange: () => setMoveType(\"list\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(ListTree, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Move to another list\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"radio-label\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: \"moveType\",\n                  value: \"parent\",\n                  checked: moveType === \"parent\",\n                  onChange: () => setMoveType(\"parent\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(MoveVertical, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Change hierarchy level\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), moveType === \"list\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"listSelect\",\n              children: [\"Select List \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"required\",\n                children: \"*\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 31\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this), filteredLists.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-error\",\n              children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"No other lists available. Create a new list first.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"listSelect\",\n              value: selectedListId,\n              onChange: e => setSelectedListId(e.target.value),\n              className: \"select-input\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select a list\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 21\n              }, this), filteredLists.map(list => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: list.id,\n                children: list.title\n              }, list.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 23\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 15\n          }, this), moveType === \"parent\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"listSelectForParent\",\n                children: \"Select List (Optional)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"listSelectForParent\",\n                value: selectedListId,\n                onChange: e => setSelectedListId(e.target.value),\n                className: \"select-input\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Current List\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 21\n                }, this), filteredLists.map(list => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: list.id,\n                  children: list.title\n                }, list.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 314,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"parentSelect\",\n                children: [\"Select Parent Task \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"required\",\n                  children: \"*\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 40\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 19\n              }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-spinner-container\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"loading-spinner\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 21\n              }, this) : potentialParents.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"no-options-message\",\n                  children: \"No available parent tasks. Moving to top level.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"parentSelect\",\n                  value: \"root\",\n                  onChange: e => setSelectedParentId(e.target.value),\n                  className: \"select-input\",\n                  children: /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"root\",\n                    children: \"Move to top level\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 338,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"parentSelect\",\n                value: selectedParentId,\n                onChange: e => setSelectedParentId(e.target.value),\n                className: \"select-input\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select a parent task\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"root\",\n                  children: \"Move to top level\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 23\n                }, this), potentialParents.map(parent => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: parent.id,\n                  children: [Array(parent.depth + 1).join(\"— \"), \" \", parent.title]\n                }, parent.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 25\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"button secondary\",\n            onClick: onClose,\n            disabled: isSubmitting,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"button primary\",\n            disabled: isSubmitting || isLoading || moveType === \"list\" && !selectedListId || moveType === \"parent\" && !selectedParentId && selectedParentId !== \"root\",\n            children: isSubmitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"button-spinner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 19\n              }, this), \"Moving...\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Move Task\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ArrowRight, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 227,\n    columnNumber: 5\n  }, this);\n};\n_s(MoveTaskModal, \"/8vZO3FfqHYvIr9L7xizgTRxRFA=\");\n_c = MoveTaskModal;\nexport default MoveTaskModal;\nvar _c;\n$RefreshReg$(_c, \"MoveTaskModal\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","useRef","useCallback","X","AlertCircle","ArrowRight","MoveVertical","ListTree","api","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","MoveTaskModal","isOpen","onClose","lists","currentListId","taskTitle","task","fetchTasks","selectedListId","setSelectedListId","selectedParentId","setSelectedParentId","isSubmitting","setIsSubmitting","isLoading","setIsLoading","moveType","setMoveType","filteredLists","setFilteredLists","potentialParents","setPotentialParents","taskDepth","setTaskDepth","modalContentRef","requestInProgress","calculateTaskDepth","id","response","get","allTasks","data","findTaskDepth","tasks","taskId","currentDepth","t","subtasks","length","foundDepth","depth","error","console","filtered","filter","list","current","fetchPotentialParents","listId","getTaskDepth","taskObj","parent_id","findParent","parentId","found","parent","filterTaskAndDescendants","filteredTasks","flattenTasks","result","forEach","maxDepth","currentTaskDepth","push","title","flatTasks","handleSubmit","e","preventDefault","patch","list_id","targetList","find","l","success","_filteredLists$find","_lists$find","_potentialParents$fin","targetListId","targetListName","parentName","p","setTimeout","_error$response","_error$response$data","className","children","fileName","lineNumber","columnNumber","onClick","size","onSubmit","ref","type","name","value","checked","onChange","htmlFor","target","map","Array","join","disabled","_c","$RefreshReg$"],"sources":["/Users/rwankhalifa/Documents/HierarchicalTodoList/client/src/components/MoveTaskModal.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useRef, useCallback } from \"react\"\nimport { X, AlertCircle, ArrowRight, MoveVertical, ListTree } from \"lucide-react\"\nimport api from \"../services/api\"\nimport { toast } from \"react-toastify\"\nimport \"./Modal.css\"\n\nconst MoveTaskModal = ({ isOpen, onClose, lists, currentListId, taskTitle, task, fetchTasks }) => {\n  const [selectedListId, setSelectedListId] = useState(\"\")\n  const [selectedParentId, setSelectedParentId] = useState(\"\")\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [isLoading, setIsLoading] = useState(false)\n  const [moveType, setMoveType] = useState(\"list\") // \"list\" or \"parent\"\n  const [filteredLists, setFilteredLists] = useState([])\n  const [potentialParents, setPotentialParents] = useState([])\n  const [taskDepth, setTaskDepth] = useState(0)\n  const modalContentRef = useRef(null)\n  const requestInProgress = useRef(false)\n\n  // Calculate the depth of the current task\n  const calculateTaskDepth = useCallback(async () => {\n    if (!task || !task.id) return\n\n    try {\n      // Get all tasks for the current list\n      const response = await api.get(`/api/todos/tasks/${currentListId}`)\n      const allTasks = response.data\n\n      // Helper function to find a task's depth\n      const findTaskDepth = (tasks, taskId, currentDepth = 0) => {\n        for (const t of tasks) {\n          if (t.id === taskId) {\n            return currentDepth\n          }\n\n          if (t.subtasks && t.subtasks.length > 0) {\n            const foundDepth = findTaskDepth(t.subtasks, taskId, currentDepth + 1)\n            if (foundDepth !== -1) {\n              return foundDepth\n            }\n          }\n        }\n\n        return -1\n      }\n\n      const depth = findTaskDepth(allTasks, task.id)\n      setTaskDepth(depth !== -1 ? depth : 0)\n    } catch (error) {\n      console.error(\"Failed to calculate task depth:\", error)\n      setTaskDepth(0)\n    }\n  }, [currentListId, task])\n\n  useEffect(() => {\n    if (isOpen && lists) {\n      // Filter out the current list for list movement\n      const filtered = lists.filter((list) => list.id !== currentListId)\n      setFilteredLists(filtered)\n\n      // Reset selected values when modal opens\n      setSelectedListId(\"\")\n      setSelectedParentId(\"\")\n      setMoveType(\"list\")\n      setPotentialParents([])\n      setIsLoading(false)\n      setIsSubmitting(false)\n      requestInProgress.current = false\n\n      // Calculate the current task's depth\n      calculateTaskDepth()\n    }\n  }, [isOpen, lists, currentListId, task, calculateTaskDepth]) // Added calculateTaskDepth to dependency array\n\n  // Fetch potential parent tasks when moveType changes to \"parent\"\n  const fetchPotentialParents = useCallback(async () => {\n    // Prevent multiple simultaneous requests\n    if (requestInProgress.current) return\n\n    requestInProgress.current = true\n    setIsLoading(true)\n\n    try {\n      // Fetch tasks from the selected list or current list if none selected\n      const listId = selectedListId || currentListId\n      const response = await api.get(`/api/todos/tasks/${listId}`)\n\n      // Helper function to get the depth of a task in the hierarchy\n      const getTaskDepth = (taskObj, allTasks, currentDepth = 0) => {\n        // Base case: if we're at the top level, return current depth\n        if (!taskObj.parent_id) return currentDepth\n\n        // Find the parent task\n        const findParent = (tasks, parentId) => {\n          for (const t of tasks) {\n            if (t.id === parentId) return t\n            if (t.subtasks && t.subtasks.length > 0) {\n              const found = findParent(t.subtasks, parentId)\n              if (found) return found\n            }\n          }\n          return null\n        }\n\n        const parent = findParent(allTasks, taskObj.parent_id)\n        if (!parent) return currentDepth // Parent not found\n\n        // Recursively get depth of parent\n        return getTaskDepth(parent, allTasks, currentDepth + 1)\n      }\n\n      // Filter out the current task and its subtasks (can't move a task to be its own child)\n      const filterTaskAndDescendants = (tasks, taskId) => {\n        return tasks.filter((t) => {\n          if (t.id === taskId) return false\n\n          // Also filter out any descendants\n          if (t.subtasks && t.subtasks.length > 0) {\n            t.subtasks = filterTaskAndDescendants(t.subtasks, taskId)\n          }\n\n          return true\n        })\n      }\n\n      const filteredTasks = filterTaskAndDescendants(response.data, task.id)\n\n      // Flatten the task hierarchy for the dropdown\n      const flattenTasks = (tasks, depth = 0, result = []) => {\n        tasks.forEach((t) => {\n          // Check if adding this task as a parent would exceed max depth\n          const maxDepth = 2 // 0-based, so this is 3 levels\n          const currentTaskDepth = getTaskDepth(task, response.data)\n\n          // Only add as potential parent if it wouldn't exceed max depth\n          if (depth + currentTaskDepth <= maxDepth) {\n            result.push({\n              id: t.id,\n              title: t.title,\n              depth,\n            })\n          }\n\n          if (t.subtasks && t.subtasks.length > 0) {\n            flattenTasks(t.subtasks, depth + 1, result)\n          }\n        })\n        return result\n      }\n\n      const flatTasks = flattenTasks(filteredTasks)\n      setPotentialParents(flatTasks)\n    } catch (error) {\n      console.error(\"Failed to fetch potential parent tasks:\", error)\n      toast.error(\"Failed to load tasks. Please try again.\")\n    } finally {\n      setIsLoading(false)\n      requestInProgress.current = false\n    }\n  }, [selectedListId, currentListId, task])\n\n  // Update the useEffect to include fetchPotentialParents in the dependency array\n  useEffect(() => {\n    if (moveType === \"parent\" && isOpen && !isSubmitting) {\n      fetchPotentialParents()\n    }\n  }, [moveType, isOpen, selectedListId, fetchPotentialParents, isSubmitting])\n\n  if (!isOpen) return null\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n\n    if (moveType === \"list\" && !selectedListId) return\n    if (moveType === \"parent\" && !selectedParentId && selectedParentId !== \"root\") return\n    if (isSubmitting || isLoading) return\n\n    setIsSubmitting(true)\n    try {\n      if (moveType === \"list\") {\n        // Move to another list\n        await api.patch(`/api/todos/task/${task.id}/move`, {\n          list_id: selectedListId,\n          parent_id: null, // Make it a top-level task\n        })\n\n        const targetList = filteredLists.find((l) => l.id === selectedListId)\n        toast.success(`Task moved to \"${targetList?.title || \"another list\"}\"`)\n      } else {\n        // Move to be a child of another task or to be a top-level task\n        const targetListId = selectedListId || currentListId\n\n        // If \"root\" is selected, send null as parent_id to make it a top-level task\n        // Otherwise, send the selected parent ID\n        const parentId = selectedParentId === \"root\" ? null : selectedParentId\n\n        const targetListName = selectedListId\n          ? filteredLists.find((l) => l.id === selectedListId)?.title\n          : lists.find((l) => l.id === currentListId)?.title\n\n        const parentName =\n          selectedParentId === \"root\" ? \"top level\" : potentialParents.find((p) => p.id === selectedParentId)?.title\n\n        await api.patch(`/api/todos/task/${task.id}/move`, {\n          list_id: targetListId,\n          parent_id: parentId,\n        })\n\n        toast.success(`Task moved to ${parentName ? `\"${parentName}\"` : \"top level\"} in ${targetListName}`)\n      }\n\n      // Wait a moment before fetching to ensure the server has processed the change\n      setTimeout(() => {\n        fetchTasks()\n        onClose()\n      }, 300)\n    } catch (error) {\n      console.error(\"Failed to move task:\", error)\n      toast.error(error.response?.data?.error || \"Failed to move task. Please try again.\")\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  return (\n    <div className=\"modal-overlay\">\n      <div className=\"modal move-task-modal\">\n        <div className=\"modal-header\">\n          <h2>Move Task</h2>\n          <button onClick={onClose} className=\"close-button\" aria-label=\"Close\">\n            <X size={20} />\n          </button>\n        </div>\n        <form onSubmit={handleSubmit}>\n          <div className=\"modal-body\" ref={modalContentRef}>\n            <div className=\"task-info\">\n              <p>\n                Moving task: <strong>{taskTitle}</strong>\n              </p>\n              <p className=\"task-depth-info\">\n                Current level: <strong>{taskDepth + 1}</strong> (of 3 maximum levels)\n              </p>\n            </div>\n\n            <div className=\"form-group\">\n              <label>Move Type</label>\n              <div className=\"radio-group move-type-options\">\n                <label className=\"radio-label\">\n                  <input\n                    type=\"radio\"\n                    name=\"moveType\"\n                    value=\"list\"\n                    checked={moveType === \"list\"}\n                    onChange={() => setMoveType(\"list\")}\n                  />\n                  <ListTree size={16} />\n                  <span>Move to another list</span>\n                </label>\n                <label className=\"radio-label\">\n                  <input\n                    type=\"radio\"\n                    name=\"moveType\"\n                    value=\"parent\"\n                    checked={moveType === \"parent\"}\n                    onChange={() => setMoveType(\"parent\")}\n                  />\n                  <MoveVertical size={16} />\n                  <span>Change hierarchy level</span>\n                </label>\n              </div>\n            </div>\n\n            {moveType === \"list\" && (\n              <div className=\"form-group\">\n                <label htmlFor=\"listSelect\">\n                  Select List <span className=\"required\">*</span>\n                </label>\n                {filteredLists.length === 0 ? (\n                  <div className=\"modal-error\">\n                    <AlertCircle size={16} />\n                    <span>No other lists available. Create a new list first.</span>\n                  </div>\n                ) : (\n                  <select\n                    id=\"listSelect\"\n                    value={selectedListId}\n                    onChange={(e) => setSelectedListId(e.target.value)}\n                    className=\"select-input\"\n                  >\n                    <option value=\"\">Select a list</option>\n                    {filteredLists.map((list) => (\n                      <option key={list.id} value={list.id}>\n                        {list.title}\n                      </option>\n                    ))}\n                  </select>\n                )}\n              </div>\n            )}\n\n            {moveType === \"parent\" && (\n              <>\n                <div className=\"form-group\">\n                  <label htmlFor=\"listSelectForParent\">Select List (Optional)</label>\n                  <select\n                    id=\"listSelectForParent\"\n                    value={selectedListId}\n                    onChange={(e) => setSelectedListId(e.target.value)}\n                    className=\"select-input\"\n                  >\n                    <option value=\"\">Current List</option>\n                    {filteredLists.map((list) => (\n                      <option key={list.id} value={list.id}>\n                        {list.title}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div className=\"form-group\">\n                  <label htmlFor=\"parentSelect\">\n                    Select Parent Task <span className=\"required\">*</span>\n                  </label>\n                  {isLoading ? (\n                    <div className=\"loading-spinner-container\">\n                      <div className=\"loading-spinner\"></div>\n                    </div>\n                  ) : potentialParents.length === 0 ? (\n                    <div className=\"form-group\">\n                      <div className=\"no-options-message\">No available parent tasks. Moving to top level.</div>\n                      <select\n                        id=\"parentSelect\"\n                        value=\"root\"\n                        onChange={(e) => setSelectedParentId(e.target.value)}\n                        className=\"select-input\"\n                      >\n                        <option value=\"root\">Move to top level</option>\n                      </select>\n                    </div>\n                  ) : (\n                    <select\n                      id=\"parentSelect\"\n                      value={selectedParentId}\n                      onChange={(e) => setSelectedParentId(e.target.value)}\n                      className=\"select-input\"\n                    >\n                      <option value=\"\">Select a parent task</option>\n                      <option value=\"root\">Move to top level</option>\n                      {potentialParents.map((parent) => (\n                        <option key={parent.id} value={parent.id}>\n                          {Array(parent.depth + 1).join(\"— \")} {parent.title}\n                        </option>\n                      ))}\n                    </select>\n                  )}\n                </div>\n              </>\n            )}\n          </div>\n\n          <div className=\"modal-footer\">\n            <button type=\"button\" className=\"button secondary\" onClick={onClose} disabled={isSubmitting}>\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"button primary\"\n              disabled={\n                isSubmitting ||\n                isLoading ||\n                (moveType === \"list\" && !selectedListId) ||\n                (moveType === \"parent\" && !selectedParentId && selectedParentId !== \"root\")\n              }\n            >\n              {isSubmitting ? (\n                <>\n                  <div className=\"button-spinner\"></div>\n                  Moving...\n                </>\n              ) : (\n                <>\n                  <span>Move Task</span>\n                  <ArrowRight size={16} />\n                </>\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default MoveTaskModal\n\n"],"mappings":"AAAA,YAAY;;AAAA,IAAAA,YAAA;EAAAC,EAAA,GAAAC,YAAA;AAEZ,SAASC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;AAChE,SAASC,CAAC,EAAEC,WAAW,EAAEC,UAAU,EAAEC,YAAY,EAAEC,QAAQ,QAAQ,cAAc;AACjF,OAAOC,GAAG,MAAM,iBAAiB;AACjC,SAASC,KAAK,QAAQ,gBAAgB;AACtC,OAAO,aAAa;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEpB,MAAMC,aAAa,GAAGA,CAAC;EAAEC,MAAM;EAAEC,OAAO;EAAEC,KAAK;EAAEC,aAAa;EAAEC,SAAS;EAAEC,IAAI;EAAEC;AAAW,CAAC,KAAK;EAAAxB,EAAA;EAChG,MAAM,CAACyB,cAAc,EAAEC,iBAAiB,CAAC,GAAGxB,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACyB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG1B,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAAC2B,YAAY,EAAEC,eAAe,CAAC,GAAG5B,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAAC6B,SAAS,EAAEC,YAAY,CAAC,GAAG9B,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAAC+B,QAAQ,EAAEC,WAAW,CAAC,GAAGhC,QAAQ,CAAC,MAAM,CAAC,EAAC;EACjD,MAAM,CAACiC,aAAa,EAAEC,gBAAgB,CAAC,GAAGlC,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACmC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGpC,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAACqC,SAAS,EAAEC,YAAY,CAAC,GAAGtC,QAAQ,CAAC,CAAC,CAAC;EAC7C,MAAMuC,eAAe,GAAGrC,MAAM,CAAC,IAAI,CAAC;EACpC,MAAMsC,iBAAiB,GAAGtC,MAAM,CAAC,KAAK,CAAC;;EAEvC;EACA,MAAMuC,kBAAkB,GAAGtC,WAAW,CAAC,YAAY;IACjD,IAAI,CAACkB,IAAI,IAAI,CAACA,IAAI,CAACqB,EAAE,EAAE;IAEvB,IAAI;MACF;MACA,MAAMC,QAAQ,GAAG,MAAMlC,GAAG,CAACmC,GAAG,CAAC,oBAAoBzB,aAAa,EAAE,CAAC;MACnE,MAAM0B,QAAQ,GAAGF,QAAQ,CAACG,IAAI;;MAE9B;MACA,MAAMC,aAAa,GAAGA,CAACC,KAAK,EAAEC,MAAM,EAAEC,YAAY,GAAG,CAAC,KAAK;QACzD,KAAK,MAAMC,CAAC,IAAIH,KAAK,EAAE;UACrB,IAAIG,CAAC,CAACT,EAAE,KAAKO,MAAM,EAAE;YACnB,OAAOC,YAAY;UACrB;UAEA,IAAIC,CAAC,CAACC,QAAQ,IAAID,CAAC,CAACC,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;YACvC,MAAMC,UAAU,GAAGP,aAAa,CAACI,CAAC,CAACC,QAAQ,EAAEH,MAAM,EAAEC,YAAY,GAAG,CAAC,CAAC;YACtE,IAAII,UAAU,KAAK,CAAC,CAAC,EAAE;cACrB,OAAOA,UAAU;YACnB;UACF;QACF;QAEA,OAAO,CAAC,CAAC;MACX,CAAC;MAED,MAAMC,KAAK,GAAGR,aAAa,CAACF,QAAQ,EAAExB,IAAI,CAACqB,EAAE,CAAC;MAC9CJ,YAAY,CAACiB,KAAK,KAAK,CAAC,CAAC,GAAGA,KAAK,GAAG,CAAC,CAAC;IACxC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;MACvDlB,YAAY,CAAC,CAAC,CAAC;IACjB;EACF,CAAC,EAAE,CAACnB,aAAa,EAAEE,IAAI,CAAC,CAAC;EAEzBpB,SAAS,CAAC,MAAM;IACd,IAAIe,MAAM,IAAIE,KAAK,EAAE;MACnB;MACA,MAAMwC,QAAQ,GAAGxC,KAAK,CAACyC,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAAClB,EAAE,KAAKvB,aAAa,CAAC;MAClEe,gBAAgB,CAACwB,QAAQ,CAAC;;MAE1B;MACAlC,iBAAiB,CAAC,EAAE,CAAC;MACrBE,mBAAmB,CAAC,EAAE,CAAC;MACvBM,WAAW,CAAC,MAAM,CAAC;MACnBI,mBAAmB,CAAC,EAAE,CAAC;MACvBN,YAAY,CAAC,KAAK,CAAC;MACnBF,eAAe,CAAC,KAAK,CAAC;MACtBY,iBAAiB,CAACqB,OAAO,GAAG,KAAK;;MAEjC;MACApB,kBAAkB,CAAC,CAAC;IACtB;EACF,CAAC,EAAE,CAACzB,MAAM,EAAEE,KAAK,EAAEC,aAAa,EAAEE,IAAI,EAAEoB,kBAAkB,CAAC,CAAC,EAAC;;EAE7D;EACA,MAAMqB,qBAAqB,GAAG3D,WAAW,CAAC,YAAY;IACpD;IACA,IAAIqC,iBAAiB,CAACqB,OAAO,EAAE;IAE/BrB,iBAAiB,CAACqB,OAAO,GAAG,IAAI;IAChC/B,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF;MACA,MAAMiC,MAAM,GAAGxC,cAAc,IAAIJ,aAAa;MAC9C,MAAMwB,QAAQ,GAAG,MAAMlC,GAAG,CAACmC,GAAG,CAAC,oBAAoBmB,MAAM,EAAE,CAAC;;MAE5D;MACA,MAAMC,YAAY,GAAGA,CAACC,OAAO,EAAEpB,QAAQ,EAAEK,YAAY,GAAG,CAAC,KAAK;QAC5D;QACA,IAAI,CAACe,OAAO,CAACC,SAAS,EAAE,OAAOhB,YAAY;;QAE3C;QACA,MAAMiB,UAAU,GAAGA,CAACnB,KAAK,EAAEoB,QAAQ,KAAK;UACtC,KAAK,MAAMjB,CAAC,IAAIH,KAAK,EAAE;YACrB,IAAIG,CAAC,CAACT,EAAE,KAAK0B,QAAQ,EAAE,OAAOjB,CAAC;YAC/B,IAAIA,CAAC,CAACC,QAAQ,IAAID,CAAC,CAACC,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;cACvC,MAAMgB,KAAK,GAAGF,UAAU,CAAChB,CAAC,CAACC,QAAQ,EAAEgB,QAAQ,CAAC;cAC9C,IAAIC,KAAK,EAAE,OAAOA,KAAK;YACzB;UACF;UACA,OAAO,IAAI;QACb,CAAC;QAED,MAAMC,MAAM,GAAGH,UAAU,CAACtB,QAAQ,EAAEoB,OAAO,CAACC,SAAS,CAAC;QACtD,IAAI,CAACI,MAAM,EAAE,OAAOpB,YAAY,EAAC;;QAEjC;QACA,OAAOc,YAAY,CAACM,MAAM,EAAEzB,QAAQ,EAAEK,YAAY,GAAG,CAAC,CAAC;MACzD,CAAC;;MAED;MACA,MAAMqB,wBAAwB,GAAGA,CAACvB,KAAK,EAAEC,MAAM,KAAK;QAClD,OAAOD,KAAK,CAACW,MAAM,CAAER,CAAC,IAAK;UACzB,IAAIA,CAAC,CAACT,EAAE,KAAKO,MAAM,EAAE,OAAO,KAAK;;UAEjC;UACA,IAAIE,CAAC,CAACC,QAAQ,IAAID,CAAC,CAACC,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;YACvCF,CAAC,CAACC,QAAQ,GAAGmB,wBAAwB,CAACpB,CAAC,CAACC,QAAQ,EAAEH,MAAM,CAAC;UAC3D;UAEA,OAAO,IAAI;QACb,CAAC,CAAC;MACJ,CAAC;MAED,MAAMuB,aAAa,GAAGD,wBAAwB,CAAC5B,QAAQ,CAACG,IAAI,EAAEzB,IAAI,CAACqB,EAAE,CAAC;;MAEtE;MACA,MAAM+B,YAAY,GAAGA,CAACzB,KAAK,EAAEO,KAAK,GAAG,CAAC,EAAEmB,MAAM,GAAG,EAAE,KAAK;QACtD1B,KAAK,CAAC2B,OAAO,CAAExB,CAAC,IAAK;UACnB;UACA,MAAMyB,QAAQ,GAAG,CAAC,EAAC;UACnB,MAAMC,gBAAgB,GAAGb,YAAY,CAAC3C,IAAI,EAAEsB,QAAQ,CAACG,IAAI,CAAC;;UAE1D;UACA,IAAIS,KAAK,GAAGsB,gBAAgB,IAAID,QAAQ,EAAE;YACxCF,MAAM,CAACI,IAAI,CAAC;cACVpC,EAAE,EAAES,CAAC,CAACT,EAAE;cACRqC,KAAK,EAAE5B,CAAC,CAAC4B,KAAK;cACdxB;YACF,CAAC,CAAC;UACJ;UAEA,IAAIJ,CAAC,CAACC,QAAQ,IAAID,CAAC,CAACC,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;YACvCoB,YAAY,CAACtB,CAAC,CAACC,QAAQ,EAAEG,KAAK,GAAG,CAAC,EAAEmB,MAAM,CAAC;UAC7C;QACF,CAAC,CAAC;QACF,OAAOA,MAAM;MACf,CAAC;MAED,MAAMM,SAAS,GAAGP,YAAY,CAACD,aAAa,CAAC;MAC7CpC,mBAAmB,CAAC4C,SAAS,CAAC;IAChC,CAAC,CAAC,OAAOxB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;MAC/D9C,KAAK,CAAC8C,KAAK,CAAC,yCAAyC,CAAC;IACxD,CAAC,SAAS;MACR1B,YAAY,CAAC,KAAK,CAAC;MACnBU,iBAAiB,CAACqB,OAAO,GAAG,KAAK;IACnC;EACF,CAAC,EAAE,CAACtC,cAAc,EAAEJ,aAAa,EAAEE,IAAI,CAAC,CAAC;;EAEzC;EACApB,SAAS,CAAC,MAAM;IACd,IAAI8B,QAAQ,KAAK,QAAQ,IAAIf,MAAM,IAAI,CAACW,YAAY,EAAE;MACpDmC,qBAAqB,CAAC,CAAC;IACzB;EACF,CAAC,EAAE,CAAC/B,QAAQ,EAAEf,MAAM,EAAEO,cAAc,EAAEuC,qBAAqB,EAAEnC,YAAY,CAAC,CAAC;EAE3E,IAAI,CAACX,MAAM,EAAE,OAAO,IAAI;EAExB,MAAMiE,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAElB,IAAIpD,QAAQ,KAAK,MAAM,IAAI,CAACR,cAAc,EAAE;IAC5C,IAAIQ,QAAQ,KAAK,QAAQ,IAAI,CAACN,gBAAgB,IAAIA,gBAAgB,KAAK,MAAM,EAAE;IAC/E,IAAIE,YAAY,IAAIE,SAAS,EAAE;IAE/BD,eAAe,CAAC,IAAI,CAAC;IACrB,IAAI;MACF,IAAIG,QAAQ,KAAK,MAAM,EAAE;QACvB;QACA,MAAMtB,GAAG,CAAC2E,KAAK,CAAC,mBAAmB/D,IAAI,CAACqB,EAAE,OAAO,EAAE;UACjD2C,OAAO,EAAE9D,cAAc;UACvB2C,SAAS,EAAE,IAAI,CAAE;QACnB,CAAC,CAAC;QAEF,MAAMoB,UAAU,GAAGrD,aAAa,CAACsD,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAAC9C,EAAE,KAAKnB,cAAc,CAAC;QACrEb,KAAK,CAAC+E,OAAO,CAAC,kBAAkB,CAAAH,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEP,KAAK,KAAI,cAAc,GAAG,CAAC;MACzE,CAAC,MAAM;QAAA,IAAAW,mBAAA,EAAAC,WAAA,EAAAC,qBAAA;QACL;QACA,MAAMC,YAAY,GAAGtE,cAAc,IAAIJ,aAAa;;QAEpD;QACA;QACA,MAAMiD,QAAQ,GAAG3C,gBAAgB,KAAK,MAAM,GAAG,IAAI,GAAGA,gBAAgB;QAEtE,MAAMqE,cAAc,GAAGvE,cAAc,IAAAmE,mBAAA,GACjCzD,aAAa,CAACsD,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAAC9C,EAAE,KAAKnB,cAAc,CAAC,cAAAmE,mBAAA,uBAAlDA,mBAAA,CAAoDX,KAAK,IAAAY,WAAA,GACzDzE,KAAK,CAACqE,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAAC9C,EAAE,KAAKvB,aAAa,CAAC,cAAAwE,WAAA,uBAAzCA,WAAA,CAA2CZ,KAAK;QAEpD,MAAMgB,UAAU,GACdtE,gBAAgB,KAAK,MAAM,GAAG,WAAW,IAAAmE,qBAAA,GAAGzD,gBAAgB,CAACoD,IAAI,CAAES,CAAC,IAAKA,CAAC,CAACtD,EAAE,KAAKjB,gBAAgB,CAAC,cAAAmE,qBAAA,uBAAvDA,qBAAA,CAAyDb,KAAK;QAE5G,MAAMtE,GAAG,CAAC2E,KAAK,CAAC,mBAAmB/D,IAAI,CAACqB,EAAE,OAAO,EAAE;UACjD2C,OAAO,EAAEQ,YAAY;UACrB3B,SAAS,EAAEE;QACb,CAAC,CAAC;QAEF1D,KAAK,CAAC+E,OAAO,CAAC,iBAAiBM,UAAU,GAAG,IAAIA,UAAU,GAAG,GAAG,WAAW,OAAOD,cAAc,EAAE,CAAC;MACrG;;MAEA;MACAG,UAAU,CAAC,MAAM;QACf3E,UAAU,CAAC,CAAC;QACZL,OAAO,CAAC,CAAC;MACX,CAAC,EAAE,GAAG,CAAC;IACT,CAAC,CAAC,OAAOuC,KAAK,EAAE;MAAA,IAAA0C,eAAA,EAAAC,oBAAA;MACd1C,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5C9C,KAAK,CAAC8C,KAAK,CAAC,EAAA0C,eAAA,GAAA1C,KAAK,CAACb,QAAQ,cAAAuD,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBpD,IAAI,cAAAqD,oBAAA,uBAApBA,oBAAA,CAAsB3C,KAAK,KAAI,wCAAwC,CAAC;IACtF,CAAC,SAAS;MACR5B,eAAe,CAAC,KAAK,CAAC;IACxB;EACF,CAAC;EAED,oBACEhB,OAAA;IAAKwF,SAAS,EAAC,eAAe;IAAAC,QAAA,eAC5BzF,OAAA;MAAKwF,SAAS,EAAC,uBAAuB;MAAAC,QAAA,gBACpCzF,OAAA;QAAKwF,SAAS,EAAC,cAAc;QAAAC,QAAA,gBAC3BzF,OAAA;UAAAyF,QAAA,EAAI;QAAS;UAAAC,QAAA,EAAAzG,YAAA;UAAA0G,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAClB5F,OAAA;UAAQ6F,OAAO,EAAExF,OAAQ;UAACmF,SAAS,EAAC,cAAc;UAAC,cAAW,OAAO;UAAAC,QAAA,eACnEzF,OAAA,CAACR,CAAC;YAACsG,IAAI,EAAE;UAAG;YAAAJ,QAAA,EAAAzG,YAAA;YAAA0G,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAF,QAAA,EAAAzG,YAAA;UAAA0G,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAF,QAAA,EAAAzG,YAAA;QAAA0G,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eACN5F,OAAA;QAAM+F,QAAQ,EAAE1B,YAAa;QAAAoB,QAAA,gBAC3BzF,OAAA;UAAKwF,SAAS,EAAC,YAAY;UAACQ,GAAG,EAAErE,eAAgB;UAAA8D,QAAA,gBAC/CzF,OAAA;YAAKwF,SAAS,EAAC,WAAW;YAAAC,QAAA,gBACxBzF,OAAA;cAAAyF,QAAA,GAAG,eACY,eAAAzF,OAAA;gBAAAyF,QAAA,EAASjF;cAAS;gBAAAkF,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OAAS,CAAC;YAAA;cAAAF,QAAA,EAAAzG,YAAA;cAAA0G,UAAA;cAAAC,YAAA;YAAA,OACxC,CAAC,eACJ5F,OAAA;cAAGwF,SAAS,EAAC,iBAAiB;cAAAC,QAAA,GAAC,iBACd,eAAAzF,OAAA;gBAAAyF,QAAA,EAAShE,SAAS,GAAG;cAAC;gBAAAiE,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OAAS,CAAC,0BACjD;YAAA;cAAAF,QAAA,EAAAzG,YAAA;cAAA0G,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAF,QAAA,EAAAzG,YAAA;YAAA0G,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eAEN5F,OAAA;YAAKwF,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBzF,OAAA;cAAAyF,QAAA,EAAO;YAAS;cAAAC,QAAA,EAAAzG,YAAA;cAAA0G,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACxB5F,OAAA;cAAKwF,SAAS,EAAC,+BAA+B;cAAAC,QAAA,gBAC5CzF,OAAA;gBAAOwF,SAAS,EAAC,aAAa;gBAAAC,QAAA,gBAC5BzF,OAAA;kBACEiG,IAAI,EAAC,OAAO;kBACZC,IAAI,EAAC,UAAU;kBACfC,KAAK,EAAC,MAAM;kBACZC,OAAO,EAAEjF,QAAQ,KAAK,MAAO;kBAC7BkF,QAAQ,EAAEA,CAAA,KAAMjF,WAAW,CAAC,MAAM;gBAAE;kBAAAsE,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OACrC,CAAC,eACF5F,OAAA,CAACJ,QAAQ;kBAACkG,IAAI,EAAE;gBAAG;kBAAAJ,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eACtB5F,OAAA;kBAAAyF,QAAA,EAAM;gBAAoB;kBAAAC,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAF,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OAC5B,CAAC,eACR5F,OAAA;gBAAOwF,SAAS,EAAC,aAAa;gBAAAC,QAAA,gBAC5BzF,OAAA;kBACEiG,IAAI,EAAC,OAAO;kBACZC,IAAI,EAAC,UAAU;kBACfC,KAAK,EAAC,QAAQ;kBACdC,OAAO,EAAEjF,QAAQ,KAAK,QAAS;kBAC/BkF,QAAQ,EAAEA,CAAA,KAAMjF,WAAW,CAAC,QAAQ;gBAAE;kBAAAsE,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OACvC,CAAC,eACF5F,OAAA,CAACL,YAAY;kBAACmG,IAAI,EAAE;gBAAG;kBAAAJ,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eAC1B5F,OAAA;kBAAAyF,QAAA,EAAM;gBAAsB;kBAAAC,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAF,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OAC9B,CAAC;YAAA;cAAAF,QAAA,EAAAzG,YAAA;cAAA0G,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC;UAAA;YAAAF,QAAA,EAAAzG,YAAA;YAAA0G,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,EAELzE,QAAQ,KAAK,MAAM,iBAClBnB,OAAA;YAAKwF,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBzF,OAAA;cAAOsG,OAAO,EAAC,YAAY;cAAAb,QAAA,GAAC,cACd,eAAAzF,OAAA;gBAAMwF,SAAS,EAAC,UAAU;gBAAAC,QAAA,EAAC;cAAC;gBAAAC,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAF,QAAA,EAAAzG,YAAA;cAAA0G,UAAA;cAAAC,YAAA;YAAA,OAC1C,CAAC,EACPvE,aAAa,CAACoB,MAAM,KAAK,CAAC,gBACzBzC,OAAA;cAAKwF,SAAS,EAAC,aAAa;cAAAC,QAAA,gBAC1BzF,OAAA,CAACP,WAAW;gBAACqG,IAAI,EAAE;cAAG;gBAAAJ,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eACzB5F,OAAA;gBAAAyF,QAAA,EAAM;cAAkD;gBAAAC,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAF,QAAA,EAAAzG,YAAA;cAAA0G,UAAA;cAAAC,YAAA;YAAA,OAC5D,CAAC,gBAEN5F,OAAA;cACE8B,EAAE,EAAC,YAAY;cACfqE,KAAK,EAAExF,cAAe;cACtB0F,QAAQ,EAAG/B,CAAC,IAAK1D,iBAAiB,CAAC0D,CAAC,CAACiC,MAAM,CAACJ,KAAK,CAAE;cACnDX,SAAS,EAAC,cAAc;cAAAC,QAAA,gBAExBzF,OAAA;gBAAQmG,KAAK,EAAC,EAAE;gBAAAV,QAAA,EAAC;cAAa;gBAAAC,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,EACtCvE,aAAa,CAACmF,GAAG,CAAExD,IAAI,iBACtBhD,OAAA;gBAAsBmG,KAAK,EAAEnD,IAAI,CAAClB,EAAG;gBAAA2D,QAAA,EAClCzC,IAAI,CAACmB;cAAK,GADAnB,IAAI,CAAClB,EAAE;gBAAA4D,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OAEZ,CACT,CAAC;YAAA;cAAAF,QAAA,EAAAzG,YAAA;cAAA0G,UAAA;cAAAC,YAAA;YAAA,OACI,CACT;UAAA;YAAAF,QAAA,EAAAzG,YAAA;YAAA0G,UAAA;YAAAC,YAAA;UAAA,OACE,CACN,EAEAzE,QAAQ,KAAK,QAAQ,iBACpBnB,OAAA,CAAAE,SAAA;YAAAuF,QAAA,gBACEzF,OAAA;cAAKwF,SAAS,EAAC,YAAY;cAAAC,QAAA,gBACzBzF,OAAA;gBAAOsG,OAAO,EAAC,qBAAqB;gBAAAb,QAAA,EAAC;cAAsB;gBAAAC,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACnE5F,OAAA;gBACE8B,EAAE,EAAC,qBAAqB;gBACxBqE,KAAK,EAAExF,cAAe;gBACtB0F,QAAQ,EAAG/B,CAAC,IAAK1D,iBAAiB,CAAC0D,CAAC,CAACiC,MAAM,CAACJ,KAAK,CAAE;gBACnDX,SAAS,EAAC,cAAc;gBAAAC,QAAA,gBAExBzF,OAAA;kBAAQmG,KAAK,EAAC,EAAE;kBAAAV,QAAA,EAAC;gBAAY;kBAAAC,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,EACrCvE,aAAa,CAACmF,GAAG,CAAExD,IAAI,iBACtBhD,OAAA;kBAAsBmG,KAAK,EAAEnD,IAAI,CAAClB,EAAG;kBAAA2D,QAAA,EAClCzC,IAAI,CAACmB;gBAAK,GADAnB,IAAI,CAAClB,EAAE;kBAAA4D,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OAEZ,CACT,CAAC;cAAA;gBAAAF,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OACI,CAAC;YAAA;cAAAF,QAAA,EAAAzG,YAAA;cAAA0G,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,eAEN5F,OAAA;cAAKwF,SAAS,EAAC,YAAY;cAAAC,QAAA,gBACzBzF,OAAA;gBAAOsG,OAAO,EAAC,cAAc;gBAAAb,QAAA,GAAC,qBACT,eAAAzF,OAAA;kBAAMwF,SAAS,EAAC,UAAU;kBAAAC,QAAA,EAAC;gBAAC;kBAAAC,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAF,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OACjD,CAAC,EACP3E,SAAS,gBACRjB,OAAA;gBAAKwF,SAAS,EAAC,2BAA2B;gBAAAC,QAAA,eACxCzF,OAAA;kBAAKwF,SAAS,EAAC;gBAAiB;kBAAAE,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OAAM;cAAC;gBAAAF,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OACpC,CAAC,GACJrE,gBAAgB,CAACkB,MAAM,KAAK,CAAC,gBAC/BzC,OAAA;gBAAKwF,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBzF,OAAA;kBAAKwF,SAAS,EAAC,oBAAoB;kBAAAC,QAAA,EAAC;gBAA+C;kBAAAC,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eACzF5F,OAAA;kBACE8B,EAAE,EAAC,cAAc;kBACjBqE,KAAK,EAAC,MAAM;kBACZE,QAAQ,EAAG/B,CAAC,IAAKxD,mBAAmB,CAACwD,CAAC,CAACiC,MAAM,CAACJ,KAAK,CAAE;kBACrDX,SAAS,EAAC,cAAc;kBAAAC,QAAA,eAExBzF,OAAA;oBAAQmG,KAAK,EAAC,MAAM;oBAAAV,QAAA,EAAC;kBAAiB;oBAAAC,QAAA,EAAAzG,YAAA;oBAAA0G,UAAA;oBAAAC,YAAA;kBAAA,OAAQ;gBAAC;kBAAAF,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OACzC,CAAC;cAAA;gBAAAF,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,gBAEN5F,OAAA;gBACE8B,EAAE,EAAC,cAAc;gBACjBqE,KAAK,EAAEtF,gBAAiB;gBACxBwF,QAAQ,EAAG/B,CAAC,IAAKxD,mBAAmB,CAACwD,CAAC,CAACiC,MAAM,CAACJ,KAAK,CAAE;gBACrDX,SAAS,EAAC,cAAc;gBAAAC,QAAA,gBAExBzF,OAAA;kBAAQmG,KAAK,EAAC,EAAE;kBAAAV,QAAA,EAAC;gBAAoB;kBAAAC,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eAC9C5F,OAAA;kBAAQmG,KAAK,EAAC,MAAM;kBAAAV,QAAA,EAAC;gBAAiB;kBAAAC,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,EAC9CrE,gBAAgB,CAACiF,GAAG,CAAE9C,MAAM,iBAC3B1D,OAAA;kBAAwBmG,KAAK,EAAEzC,MAAM,CAAC5B,EAAG;kBAAA2D,QAAA,GACtCgB,KAAK,CAAC/C,MAAM,CAACf,KAAK,GAAG,CAAC,CAAC,CAAC+D,IAAI,CAAC,IAAI,CAAC,EAAC,GAAC,EAAChD,MAAM,CAACS,KAAK;gBAAA,GADvCT,MAAM,CAAC5B,EAAE;kBAAA4D,QAAA,EAAAzG,YAAA;kBAAA0G,UAAA;kBAAAC,YAAA;gBAAA,OAEd,CACT,CAAC;cAAA;gBAAAF,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OACI,CACT;YAAA;cAAAF,QAAA,EAAAzG,YAAA;cAAA0G,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC;UAAA,eACN,CACH;QAAA;UAAAF,QAAA,EAAAzG,YAAA;UAAA0G,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,eAEN5F,OAAA;UAAKwF,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BzF,OAAA;YAAQiG,IAAI,EAAC,QAAQ;YAACT,SAAS,EAAC,kBAAkB;YAACK,OAAO,EAAExF,OAAQ;YAACsG,QAAQ,EAAE5F,YAAa;YAAA0E,QAAA,EAAC;UAE7F;YAAAC,QAAA,EAAAzG,YAAA;YAAA0G,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACT5F,OAAA;YACEiG,IAAI,EAAC,QAAQ;YACbT,SAAS,EAAC,gBAAgB;YAC1BmB,QAAQ,EACN5F,YAAY,IACZE,SAAS,IACRE,QAAQ,KAAK,MAAM,IAAI,CAACR,cAAe,IACvCQ,QAAQ,KAAK,QAAQ,IAAI,CAACN,gBAAgB,IAAIA,gBAAgB,KAAK,MACrE;YAAA4E,QAAA,EAEA1E,YAAY,gBACXf,OAAA,CAAAE,SAAA;cAAAuF,QAAA,gBACEzF,OAAA;gBAAKwF,SAAS,EAAC;cAAgB;gBAAAE,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,aAExC;YAAA,eAAE,CAAC,gBAEH5F,OAAA,CAAAE,SAAA;cAAAuF,QAAA,gBACEzF,OAAA;gBAAAyF,QAAA,EAAM;cAAS;gBAAAC,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACtB5F,OAAA,CAACN,UAAU;gBAACoG,IAAI,EAAE;cAAG;gBAAAJ,QAAA,EAAAzG,YAAA;gBAAA0G,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC;YAAA,eACxB;UACH;YAAAF,QAAA,EAAAzG,YAAA;YAAA0G,UAAA;YAAAC,YAAA;UAAA,OACK,CAAC;QAAA;UAAAF,QAAA,EAAAzG,YAAA;UAAA0G,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAF,QAAA,EAAAzG,YAAA;QAAA0G,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC;IAAA;MAAAF,QAAA,EAAAzG,YAAA;MAAA0G,UAAA;MAAAC,YAAA;IAAA,OACJ;EAAC;IAAAF,QAAA,EAAAzG,YAAA;IAAA0G,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAA1G,EAAA,CAhYKiB,aAAa;AAAAyG,EAAA,GAAbzG,aAAa;AAkYnB,eAAeA,aAAa;AAAA,IAAAyG,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}