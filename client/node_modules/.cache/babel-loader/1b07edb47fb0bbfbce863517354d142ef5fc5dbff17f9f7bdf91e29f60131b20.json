{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"/Users/rwankhalifa/Documents/HierarchicalTodoList/client/src/components/TodoList.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport api from \"../services/api\";\nimport { toast } from \"react-toastify\";\nimport TaskItem from \"./TaskItem\";\nimport CreateTaskModal from \"./CreateTaskModal\";\nimport { Plus, Loader } from \"lucide-react\";\nimport \"./TodoList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TodoList = ({\n  listId,\n  listTitle\n}) => {\n  _s();\n  const [tasks, setTasks] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n  const [parentTask, setParentTask] = useState(null);\n  useEffect(() => {\n    if (listId) {\n      fetchTasks();\n    }\n  }, [listId]);\n  const fetchTasks = async () => {\n    try {\n      setIsLoading(true);\n      const response = await api.get(`/api/todos/tasks/${listId}`);\n      setTasks(response.data);\n    } catch (error) {\n      toast.error(\"Failed to fetch tasks\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleCreateTask = async taskData => {\n    try {\n      const payload = {\n        title: taskData.title,\n        description: taskData.description || \"\",\n        status: \"Todo\",\n        list_id: listId,\n        parent_id: parentTask ? parentTask.id : null\n      };\n      await api.post(\"/api/todos/task\", payload);\n      toast.success(\"Task created successfully\");\n      fetchTasks();\n      setIsCreateModalOpen(false);\n      setParentTask(null);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || \"Failed to create task\";\n      toast.error(errorMessage);\n    }\n  };\n  const handleUpdateTaskStatus = async (taskId, newStatus) => {\n    try {\n      await api.patch(`/api/todos/task/${taskId}/status`, {\n        status: newStatus\n      });\n      fetchTasks();\n    } catch (error) {\n      toast.error(\"Failed to update task status\");\n    }\n  };\n  const openCreateSubtaskModal = task => {\n    setParentTask(task);\n    setIsCreateModalOpen(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"todo-list\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"todo-list-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"todo-list-title\",\n        children: listTitle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setParentTask(null);\n          setIsCreateModalOpen(true);\n        },\n        className: \"btn btn-primary\",\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          size: 18,\n          className: \"icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), \"Add Task\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this) : tasks.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty-tasks\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No tasks in this list yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setIsCreateModalOpen(true),\n        className: \"btn btn-primary\",\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          size: 18,\n          className: \"icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), \"Create Your First Task\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tasks-container\",\n      children: tasks.map(task => /*#__PURE__*/_jsxDEV(TaskItem, {\n        task: task,\n        onStatusChange: handleUpdateTaskStatus,\n        onCreateSubtask: openCreateSubtaskModal,\n        depth: 0,\n        fetchTasks: fetchTasks\n      }, task.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CreateTaskModal, {\n      isOpen: isCreateModalOpen,\n      onClose: () => {\n        setIsCreateModalOpen(false);\n        setParentTask(null);\n      },\n      onCreate: handleCreateTask,\n      isSubtask: !!parentTask,\n      parentTaskTitle: parentTask === null || parentTask === void 0 ? void 0 : parentTask.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(TodoList, \"/92pqVCZRFKzC95mriwc6yNfRqY=\");\n_c = TodoList;\nexport default TodoList;\nvar _c;\n$RefreshReg$(_c, \"TodoList\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","api","toast","TaskItem","CreateTaskModal","Plus","Loader","jsxDEV","_jsxDEV","TodoList","listId","listTitle","tasks","setTasks","isLoading","setIsLoading","isCreateModalOpen","setIsCreateModalOpen","parentTask","setParentTask","fetchTasks","response","get","data","error","handleCreateTask","taskData","payload","title","description","status","list_id","parent_id","id","post","success","_error$response","_error$response$data","errorMessage","handleUpdateTaskStatus","taskId","newStatus","patch","openCreateSubtaskModal","task","className","children","fileName","lineNumber","columnNumber","onClick","size","length","map","onStatusChange","onCreateSubtask","depth","isOpen","onClose","onCreate","isSubtask","parentTaskTitle","_c","$RefreshReg$"],"sources":["/Users/rwankhalifa/Documents/HierarchicalTodoList/client/src/components/TodoList.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport api from \"../services/api\"\nimport { toast } from \"react-toastify\"\nimport TaskItem from \"./TaskItem\"\nimport CreateTaskModal from \"./CreateTaskModal\"\nimport { Plus, Loader } from \"lucide-react\"\nimport \"./TodoList.css\"\n\nconst TodoList = ({ listId, listTitle }) => {\n  const [tasks, setTasks] = useState([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false)\n  const [parentTask, setParentTask] = useState(null)\n\n  useEffect(() => {\n    if (listId) {\n      fetchTasks()\n    }\n  }, [listId])\n\n  const fetchTasks = async () => {\n    try {\n      setIsLoading(true)\n      const response = await api.get(`/api/todos/tasks/${listId}`)\n      setTasks(response.data)\n    } catch (error) {\n      toast.error(\"Failed to fetch tasks\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleCreateTask = async (taskData) => {\n    try {\n      const payload = {\n        title: taskData.title,\n        description: taskData.description || \"\",\n        status: \"Todo\",\n        list_id: listId,\n        parent_id: parentTask ? parentTask.id : null,\n      }\n\n      await api.post(\"/api/todos/task\", payload)\n      toast.success(\"Task created successfully\")\n      fetchTasks()\n      setIsCreateModalOpen(false)\n      setParentTask(null)\n    } catch (error) {\n      const errorMessage = error.response?.data?.error || \"Failed to create task\"\n      toast.error(errorMessage)\n    }\n  }\n\n  const handleUpdateTaskStatus = async (taskId, newStatus) => {\n    try {\n      await api.patch(`/api/todos/task/${taskId}/status`, { status: newStatus })\n      fetchTasks()\n    } catch (error) {\n      toast.error(\"Failed to update task status\")\n    }\n  }\n\n  const openCreateSubtaskModal = (task) => {\n    setParentTask(task)\n    setIsCreateModalOpen(true)\n  }\n\n  return (\n    <div className=\"todo-list\">\n      <div className=\"todo-list-header\">\n        <h2 className=\"todo-list-title\">{listTitle}</h2>\n        <button\n          onClick={() => {\n            setParentTask(null)\n            setIsCreateModalOpen(true)\n          }}\n          className=\"btn btn-primary\"\n        >\n          <Plus size={18} className=\"icon\" />\n          Add Task\n        </button>\n      </div>\n\n      {isLoading ? (\n        <div className=\"loading-container\">\n          <Loader className=\"loading-spinner\" />\n        </div>\n      ) : tasks.length === 0 ? (\n        <div className=\"empty-tasks\">\n          <p>No tasks in this list yet.</p>\n          <button onClick={() => setIsCreateModalOpen(true)} className=\"btn btn-primary\">\n            <Plus size={18} className=\"icon\" />\n            Create Your First Task\n          </button>\n        </div>\n      ) : (\n        <div className=\"tasks-container\">\n          {tasks.map((task) => (\n            <TaskItem\n              key={task.id}\n              task={task}\n              onStatusChange={handleUpdateTaskStatus}\n              onCreateSubtask={openCreateSubtaskModal}\n              depth={0}\n              fetchTasks={fetchTasks}\n            />\n          ))}\n        </div>\n      )}\n\n      <CreateTaskModal\n        isOpen={isCreateModalOpen}\n        onClose={() => {\n          setIsCreateModalOpen(false)\n          setParentTask(null)\n        }}\n        onCreate={handleCreateTask}\n        isSubtask={!!parentTask}\n        parentTaskTitle={parentTask?.title}\n      />\n    </div>\n  )\n}\n\nexport default TodoList\n\n"],"mappings":"AAAA,YAAY;;AAAA,IAAAA,YAAA;EAAAC,EAAA,GAAAC,YAAA;AAEZ,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,GAAG,MAAM,iBAAiB;AACjC,SAASC,KAAK,QAAQ,gBAAgB;AACtC,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,eAAe,MAAM,mBAAmB;AAC/C,SAASC,IAAI,EAAEC,MAAM,QAAQ,cAAc;AAC3C,OAAO,gBAAgB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEvB,MAAMC,QAAQ,GAAGA,CAAC;EAAEC,MAAM;EAAEC;AAAU,CAAC,KAAK;EAAAd,EAAA;EAC1C,MAAM,CAACe,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACe,SAAS,EAAEC,YAAY,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACiB,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;EACjE,MAAM,CAACmB,UAAU,EAAEC,aAAa,CAAC,GAAGpB,QAAQ,CAAC,IAAI,CAAC;EAElDC,SAAS,CAAC,MAAM;IACd,IAAIU,MAAM,EAAE;MACVU,UAAU,CAAC,CAAC;IACd;EACF,CAAC,EAAE,CAACV,MAAM,CAAC,CAAC;EAEZ,MAAMU,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI;MACFL,YAAY,CAAC,IAAI,CAAC;MAClB,MAAMM,QAAQ,GAAG,MAAMpB,GAAG,CAACqB,GAAG,CAAC,oBAAoBZ,MAAM,EAAE,CAAC;MAC5DG,QAAQ,CAACQ,QAAQ,CAACE,IAAI,CAAC;IACzB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdtB,KAAK,CAACsB,KAAK,CAAC,uBAAuB,CAAC;IACtC,CAAC,SAAS;MACRT,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMU,gBAAgB,GAAG,MAAOC,QAAQ,IAAK;IAC3C,IAAI;MACF,MAAMC,OAAO,GAAG;QACdC,KAAK,EAAEF,QAAQ,CAACE,KAAK;QACrBC,WAAW,EAAEH,QAAQ,CAACG,WAAW,IAAI,EAAE;QACvCC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAErB,MAAM;QACfsB,SAAS,EAAEd,UAAU,GAAGA,UAAU,CAACe,EAAE,GAAG;MAC1C,CAAC;MAED,MAAMhC,GAAG,CAACiC,IAAI,CAAC,iBAAiB,EAAEP,OAAO,CAAC;MAC1CzB,KAAK,CAACiC,OAAO,CAAC,2BAA2B,CAAC;MAC1Cf,UAAU,CAAC,CAAC;MACZH,oBAAoB,CAAC,KAAK,CAAC;MAC3BE,aAAa,CAAC,IAAI,CAAC;IACrB,CAAC,CAAC,OAAOK,KAAK,EAAE;MAAA,IAAAY,eAAA,EAAAC,oBAAA;MACd,MAAMC,YAAY,GAAG,EAAAF,eAAA,GAAAZ,KAAK,CAACH,QAAQ,cAAAe,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBb,IAAI,cAAAc,oBAAA,uBAApBA,oBAAA,CAAsBb,KAAK,KAAI,uBAAuB;MAC3EtB,KAAK,CAACsB,KAAK,CAACc,YAAY,CAAC;IAC3B;EACF,CAAC;EAED,MAAMC,sBAAsB,GAAG,MAAAA,CAAOC,MAAM,EAAEC,SAAS,KAAK;IAC1D,IAAI;MACF,MAAMxC,GAAG,CAACyC,KAAK,CAAC,mBAAmBF,MAAM,SAAS,EAAE;QAAEV,MAAM,EAAEW;MAAU,CAAC,CAAC;MAC1ErB,UAAU,CAAC,CAAC;IACd,CAAC,CAAC,OAAOI,KAAK,EAAE;MACdtB,KAAK,CAACsB,KAAK,CAAC,8BAA8B,CAAC;IAC7C;EACF,CAAC;EAED,MAAMmB,sBAAsB,GAAIC,IAAI,IAAK;IACvCzB,aAAa,CAACyB,IAAI,CAAC;IACnB3B,oBAAoB,CAAC,IAAI,CAAC;EAC5B,CAAC;EAED,oBACET,OAAA;IAAKqC,SAAS,EAAC,WAAW;IAAAC,QAAA,gBACxBtC,OAAA;MAAKqC,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAC/BtC,OAAA;QAAIqC,SAAS,EAAC,iBAAiB;QAAAC,QAAA,EAAEnC;MAAS;QAAAoC,QAAA,EAAAnD,YAAA;QAAAoD,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAChDzC,OAAA;QACE0C,OAAO,EAAEA,CAAA,KAAM;UACb/B,aAAa,CAAC,IAAI,CAAC;UACnBF,oBAAoB,CAAC,IAAI,CAAC;QAC5B,CAAE;QACF4B,SAAS,EAAC,iBAAiB;QAAAC,QAAA,gBAE3BtC,OAAA,CAACH,IAAI;UAAC8C,IAAI,EAAE,EAAG;UAACN,SAAS,EAAC;QAAM;UAAAE,QAAA,EAAAnD,YAAA;UAAAoD,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,YAErC;MAAA;QAAAF,QAAA,EAAAnD,YAAA;QAAAoD,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAF,QAAA,EAAAnD,YAAA;MAAAoD,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,EAELnC,SAAS,gBACRN,OAAA;MAAKqC,SAAS,EAAC,mBAAmB;MAAAC,QAAA,eAChCtC,OAAA,CAACF,MAAM;QAACuC,SAAS,EAAC;MAAiB;QAAAE,QAAA,EAAAnD,YAAA;QAAAoD,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAF,QAAA,EAAAnD,YAAA;MAAAoD,UAAA;MAAAC,YAAA;IAAA,OACnC,CAAC,GACJrC,KAAK,CAACwC,MAAM,KAAK,CAAC,gBACpB5C,OAAA;MAAKqC,SAAS,EAAC,aAAa;MAAAC,QAAA,gBAC1BtC,OAAA;QAAAsC,QAAA,EAAG;MAA0B;QAAAC,QAAA,EAAAnD,YAAA;QAAAoD,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACjCzC,OAAA;QAAQ0C,OAAO,EAAEA,CAAA,KAAMjC,oBAAoB,CAAC,IAAI,CAAE;QAAC4B,SAAS,EAAC,iBAAiB;QAAAC,QAAA,gBAC5EtC,OAAA,CAACH,IAAI;UAAC8C,IAAI,EAAE,EAAG;UAACN,SAAS,EAAC;QAAM;UAAAE,QAAA,EAAAnD,YAAA;UAAAoD,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,0BAErC;MAAA;QAAAF,QAAA,EAAAnD,YAAA;QAAAoD,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAF,QAAA,EAAAnD,YAAA;MAAAoD,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,gBAENzC,OAAA;MAAKqC,SAAS,EAAC,iBAAiB;MAAAC,QAAA,EAC7BlC,KAAK,CAACyC,GAAG,CAAET,IAAI,iBACdpC,OAAA,CAACL,QAAQ;QAEPyC,IAAI,EAAEA,IAAK;QACXU,cAAc,EAAEf,sBAAuB;QACvCgB,eAAe,EAAEZ,sBAAuB;QACxCa,KAAK,EAAE,CAAE;QACTpC,UAAU,EAAEA;MAAW,GALlBwB,IAAI,CAACX,EAAE;QAAAc,QAAA,EAAAnD,YAAA;QAAAoD,UAAA;QAAAC,YAAA;MAAA,OAMb,CACF;IAAC;MAAAF,QAAA,EAAAnD,YAAA;MAAAoD,UAAA;MAAAC,YAAA;IAAA,OACC,CACN,eAEDzC,OAAA,CAACJ,eAAe;MACdqD,MAAM,EAAEzC,iBAAkB;MAC1B0C,OAAO,EAAEA,CAAA,KAAM;QACbzC,oBAAoB,CAAC,KAAK,CAAC;QAC3BE,aAAa,CAAC,IAAI,CAAC;MACrB,CAAE;MACFwC,QAAQ,EAAElC,gBAAiB;MAC3BmC,SAAS,EAAE,CAAC,CAAC1C,UAAW;MACxB2C,eAAe,EAAE3C,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEU;IAAM;MAAAmB,QAAA,EAAAnD,YAAA;MAAAoD,UAAA;MAAAC,YAAA;IAAA,OACpC,CAAC;EAAA;IAAAF,QAAA,EAAAnD,YAAA;IAAAoD,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV,CAAC;AAAApD,EAAA,CAlHKY,QAAQ;AAAAqD,EAAA,GAARrD,QAAQ;AAoHd,eAAeA,QAAQ;AAAA,IAAAqD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}